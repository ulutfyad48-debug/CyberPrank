<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ðŸ’€ CYBERPRANK v4.0 | KERNEL ACCESS</title>
    <meta name="theme-color" content="#000000">
    <link rel="manifest" href="data:application/manifest+json;base64,ewogICJuYW1lIjogIkN5YmVyUHJhbmsgdjQuMCIsCiAgInNob3J0X25hbWUiOiJDeWJlckNvcmUiLAogICJzdGFydF91cmwiOiAiLiIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIzAwMDAwMCIsCiAgInRoZW1lX2NvbG9yIjogIiMwMGZmMDAiCn0=">
    
    <style>
        :root {
            --neon-green: #0f0;
            --alert-red: #f00;
            --sys-blue: #0af;
            --bg-black: #050505;
            --glass: rgba(0, 20, 0, 0.7);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Courier New', monospace; }
        
        body {
            background-color: var(--bg-black);
            color: var(--neon-green);
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* LAYERS */
        #canvas-layer { position: fixed; top: 0; left: 0; z-index: 0; opacity: 0.4; }
        #ui-layer { position: relative; z-index: 10; height: 100%; display: flex; flex-direction: column; padding: 10px; }

        /* HEADER */
        .hud-header {
            display: flex;
            justify-content: space-between;
            border-bottom: 2px solid var(--neon-green);
            padding-bottom: 5px;
            background: linear-gradient(90deg, rgba(0,255,0,0.1), transparent);
        }
        
        .sys-status { font-size: 12px; color: var(--alert-red); animation: blink 1s infinite; }

        /* MAIN TERMINAL */
        #terminal-window {
            flex: 1;
            background: rgba(0,0,0,0.85);
            border: 1px solid #333;
            margin: 10px 0;
            padding: 10px;
            overflow-y: auto;
            box-shadow: 0 0 20px rgba(0,255,0,0.1);
            font-size: 14px;
        }

        .line { margin-bottom: 4px; word-break: break-all; }
        .line.user { color: var(--sys-blue); }
        .line.sys { color: var(--neon-green); }
        .line.err { color: var(--alert-red); text-shadow: 0 0 5px red; }
        .line.info { color: #ff0; }

        /* INPUT AREA */
        .input-line {
            display: flex;
            align-items: center;
            background: #000;
            border: 1px solid var(--neon-green);
            padding: 10px;
        }
        
        .prompt-char { color: var(--neon-green); margin-right: 10px; font-weight: bold; }
        
        #cmd-input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-family: inherit;
            font-size: 16px;
            outline: none;
        }

        /* MINIGAME OVERLAY */
        #hex-overlay {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            border: 2px solid var(--sys-blue);
            padding: 20px;
            display: none;
            z-index: 100;
            text-align: center;
            box-shadow: 0 0 50px rgba(0,100,255,0.3);
            width: 90%;
            max-width: 400px;
        }

        .hex-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .hex-btn {
            background: rgba(0, 50, 100, 0.3);
            border: 1px solid var(--sys-blue);
            color: var(--sys-blue);
            padding: 10px;
            cursor: pointer;
            transition: 0.2s;
        }
        .hex-btn:active { background: var(--sys-blue); color: black; }

        /* UTILS */
        @keyframes blink { 50% { opacity: 0; } }
        .glitch { animation: glitch 0.5s linear infinite; }
        @keyframes glitch {
            2% { transform: translate(2px,0) skew(0deg); }
            4% { transform: translate(-2px,0) skew(0deg); }
            62% { transform: translate(0,0) skew(5deg); } 
        }

        /* MOBILE CONTROLS */
        .mobile-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
            margin-bottom: 5px;
        }
        .ctrl-btn {
            background: #111;
            border: 1px solid #444;
            color: #888;
            padding: 8px;
            text-align: center;
            font-size: 10px;
            cursor: pointer;
        }
        .ctrl-btn:active { background: #333; color: #fff; }

    </style>
</head>
<body>

    <canvas id="canvas-layer"></canvas>

    <div id="ui-layer">
        <div class="hud-header">
            <div>âš¡ KERNEL_V4.0</div>
            <div id="connection-status" class="sys-status">ENCRYPTED</div>
            <div id="ip-display">NO_DATA</div>
        </div>

        <div id="terminal-window">
            <div class="line sys">Initializing Advanced Cyber Interface...</div>
            <div class="line info">Loading Modules: AUDIO, WEBGL, CRYPTO...</div>
            <div class="line sys">System Ready.</div>
            <div class="line info">Type 'help' for commands.</div>
        </div>

        <div class="mobile-controls">
            <div class="ctrl-btn" onclick="executeCmd('scan')">SCAN</div>
            <div class="ctrl-btn" onclick="executeCmd('brute')">BRUTE</div>
            <div class="ctrl-btn" onclick="executeCmd('decrypt')">DECRYPT</div>
            <div class="ctrl-btn" onclick="executeCmd('clear')">CLS</div>
        </div>

        <div class="input-line">
            <span class="prompt-char">root@kali:~#</span>
            <input type="text" id="cmd-input" autocomplete="off" placeholder="Enter command...">
        </div>
    </div>

    <div id="hex-overlay">
        <h3 style="color:var(--sys-blue)">FIREWALL DECRYPTION</h3>
        <p>Find the matching hex sequence: <span id="target-hex" style="color:#fff; font-weight:bold"></span></p>
        <div class="hex-grid" id="hex-grid"></div>
        <div id="timer-bar" style="height:4px; background:red; width:100%"></div>
    </div>

    <script>
        // ==========================================
        // 1. AUDIO SYNTHESIS ENGINE (No External Files)
        // ==========================================
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        const SoundFX = {
            playTone: (freq, type, duration) => {
                if(audioCtx.state === 'suspended') audioCtx.resume();
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.type = type;
                osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.start();
                osc.stop(audioCtx.currentTime + duration);
            },
            type: () => SoundFX.playTone(800 + Math.random()*200, 'square', 0.05),
            error: () => {
                SoundFX.playTone(150, 'sawtooth', 0.3);
                SoundFX.playTone(100, 'sawtooth', 0.3);
            },
            success: () => {
                SoundFX.playTone(1200, 'sine', 0.1);
                setTimeout(() => SoundFX.playTone(1800, 'sine', 0.2), 100);
            },
            access: () => SoundFX.playTone(200, 'square', 0.1)
        };

        // ==========================================
        // 2. ADVANCED PARTICLE SYSTEM (Network Graph)
        // ==========================================
        const canvas = document.getElementById('canvas-layer');
        const ctx = canvas.getContext('2d');
        let particles = [];
        
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize);
        resize();

        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 1; // Velocity
                this.vy = (Math.random() - 0.5) * 1;
                this.size = Math.random() * 2 + 1;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                if(this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if(this.y < 0 || this.y > canvas.height) this.vy *= -1;
            }
            draw() {
                ctx.fillStyle = '#00ff00';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI*2);
                ctx.fill();
            }
        }

        for(let i=0; i<60; i++) particles.push(new Particle());

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'rgba(0,0,0,0.1)'; // Trail effect
            
            // Draw Connections
            for(let i=0; i<particles.length; i++) {
                particles[i].update();
                particles[i].draw();
                for(let j=i; j<particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const dist = Math.sqrt(dx*dx + dy*dy);
                    if(dist < 100) {
                        ctx.strokeStyle = `rgba(0, 255, 0, ${1 - dist/100})`;
                        ctx.lineWidth = 0.5;
                        ctx.beginPath();
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animate);
        }
        animate();

        // ==========================================
        // 3. CORE LOGIC & TERMINAL
        // ==========================================
        const terminal = document.getElementById('terminal-window');
        const input = document.getElementById('cmd-input');
        
        const fileSystem = {
            'passwords.txt': 'Encrypted: [AES-256]',
            'config.sys': 'Root access required',
            'target_ip.log': '192.168.1.105'
        };

        function print(text, type='sys') {
            const div = document.createElement('div');
            div.className = `line ${type}`;
            div.textContent = `> ${text}`;
            terminal.appendChild(div);
            terminal.scrollTop = terminal.scrollHeight;
            if(type !== 'user') SoundFX.access();
        }

        async function getRealInfo() {
            print('Scanning local hardware...', 'info');
            const gpu = document.createElement('canvas').getContext('webgl').getParameter(0x9246);
            print(`GPU DETECTED: ${gpu || 'Unknown'}`, 'sys');
            print(`CORES: ${navigator.hardwareConcurrency || 4}`, 'sys');
            print(`PLATFORM: ${navigator.platform}`, 'sys');
            
            try {
                const res = await fetch('https://api.ipify.org?format=json');
                const data = await res.json();
                document.getElementById('ip-display').textContent = data.ip;
                print(`PUBLIC IP EXPOSED: ${data.ip}`, 'err');
            } catch(e) {
                print('Network masking active (Offline mode)', 'info');
            }
        }

        // ==========================================
        // 4. COMMAND PROCESSOR
        // ==========================================
        function executeCmd(cmd) {
            cmd = cmd.trim().toLowerCase();
            print(cmd, 'user');
            input.value = '';

            switch(cmd) {
                case 'help':
                    print('AVAILABLE COMMANDS:', 'info');
                    print(' scan    - Network vulnerability scanner');
                    print(' brute   - Start bruteforce attack');
                    print(' decrypt - Play decryption minigame');
                    print(' ip      - Show real device info');
                    print(' ls      - List directory files');
                    print(' clear   - Clear terminal');
                    break;
                
                case 'clear':
                case 'cls':
                    terminal.innerHTML = '';
                    break;

                case 'ip':
                    getRealInfo();
                    break;

                case 'ls':
                    Object.keys(fileSystem).forEach(f => print(f, 'info'));
                    break;

                case 'scan':
                    print('Initiating port scan...', 'info');
                    let port = 20;
                    const scanTimer = setInterval(() => {
                        port += Math.floor(Math.random() * 50);
                        if(Math.random() > 0.8) print(`Port ${port} [OPEN] - VULNERABLE`, 'err');
                        else print(`Port ${port} [CLOSED]`, 'sys');
                        
                        if(port > 1000) {
                            clearInterval(scanTimer);
                            print('Scan Complete. Target Acquired.', 'success');
                            SoundFX.success();
                        }
                    }, 100);
                    break;

                case 'brute':
                    print('Loading password list...', 'info');
                    let attempts = 0;
                    const bruteInt = setInterval(() => {
                        attempts++;
                        const pass = Math.random().toString(36).substring(7);
                        print(`Trying: ${pass}... Failed`, 'sys');
                        if(attempts > 20) {
                            clearInterval(bruteInt);
                            print('ROOT ACCESS GRANTED.', 'success');
                            document.body.style.border = "2px solid green";
                            SoundFX.success();
                        }
                    }, 50);
                    break;

                case 'decrypt':
                    startHexGame();
                    break;

                default:
                    print(`Command '${cmd}' not found.`, 'err');
                    SoundFX.error();
            }
        }

        // Input handling
        input.addEventListener('keydown', (e) => {
            if(e.key === 'Enter') executeCmd(input.value);
            else SoundFX.type();
        });

        // ==========================================
        // 5. HEX DECRYPTION MINIGAME
        // ==========================================
        function startHexGame() {
            const modal = document.getElementById('hex-overlay');
            const grid = document.getElementById('hex-grid');
            const targetDisplay = document.getElementById('target-hex');
            
            modal.style.display = 'block';
            grid.innerHTML = '';
            
            const target = Math.floor(Math.random()*255).toString(16).toUpperCase().padStart(2,'0');
            targetDisplay.innerText = target;
            
            let hexes = [];
            for(let i=0; i<15; i++) {
                hexes.push(Math.floor(Math.random()*255).toString(16).toUpperCase().padStart(2,'0'));
            }
            hexes.push(target); // Add correct answer
            hexes.sort(() => Math.random() - 0.5); // Shuffle

            hexes.forEach(h => {
                const btn = document.createElement('div');
                btn.className = 'hex-btn';
                btn.innerText = h;
                btn.onclick = () => {
                    if(h === target) {
                        print('Decryption Successful!', 'success');
                        SoundFX.success();
                        modal.style.display = 'none';
                    } else {
                        print('Decryption Failed. IPS Alerted.', 'err');
                        SoundFX.error();
                        btn.style.borderColor = 'red';
                        btn.style.color = 'red';
                    }
                };
                grid.appendChild(btn);
            });
        }

        // Initialization
        window.onload = () => {
            setTimeout(() => {
                input.focus();
                SoundFX.access();
            }, 1000);
            
            // Background Hum initialization on first click
            document.body.addEventListener('click', () => {
                if(audioCtx.state === 'suspended') audioCtx.resume();
            }, {once:true});
        };

    </script>
</body>
</html>
